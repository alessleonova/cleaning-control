<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>–û—Ç–º–µ—Ç–∫–∞ —É–±–æ—Ä–∫–∏</title>

  <style>
    body{
      font-family:Arial;
      text-align:center;
      margin-top:40px;
    }

    button{
      font-size:22px;
      padding:15px 35px;
      border:0;
      border-radius:10px;
      color:#fff;
      cursor:pointer;
      width:260px;
    }

    .green{background:#4CAF50;}
    .red{background:#F44336;}
    .gray{background:#999;}

    #msg{
      margin-top:25px;
      font-size:18px;
      line-height:1.4;
    }
  </style>
</head>


<body>

  <h2 id="title"></h2>
  <div id="subtitle"></div>

  <br>

  <button id="inBtn" class="green" onclick="mark('–Ω–∞—á–∞–ª–æ')">
    üü¢ –ù–∞—á–∞–ª–æ —É–±–æ—Ä–∫–∏<br>
    –¢–∞–∑–∞–ª–∞—É –±–∞—Å—Ç–∞–ª–¥—ã
  </button>

  <br><br>

  <button id="outBtn" class="red" onclick="mark('–∫–æ–Ω–µ—Ü')">
    üî¥ –ö–æ–Ω–µ—Ü —É–±–æ—Ä–∫–∏<br>
    –¢–∞–∑–∞–ª–∞—É –∞—è“õ—Ç–∞–ª–¥—ã
  </button>

  <div id="msg"></div>


<script>

const API_BASE =
"https://script.google.com/macros/s/AKfycbw4EUYY5WQqMwkrX0ZGpKKV6SbyG4oUY7U2C74-RgevMiKeIbrJ5pRuH_Y2NAFFeG9I/exec";
// ‚Üë –ù–ï –ú–ï–ù–Ø–ô, —É —Ç–µ–±—è —É–∂–µ —Ä–∞–±–æ—á–∏–π


// ===== –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ —Å—Å—ã–ª–∫–∏ =====
const params = new URLSearchParams(location.search);

const w = params.get("w") || "";
const f = params.get("f") || "";


// ===== –∑–∞–≥–æ–ª–æ–≤–æ–∫ =====
document.getElementById("title").innerHTML =
w
? ("–°–æ—Ç—Ä—É–¥–Ω–∏–∫ ‚Ññ" + w + "<br>“ö—ã–∑–º–µ—Ç–∫–µ—Ä ‚Ññ" + w)
: "–û—Ç–º–µ—Ç–∫–∞";


// ===== —ç—Ç–∞–∂ =====
document.getElementById("subtitle").innerHTML =
f
? ("–≠—Ç–∞–∂ " + f + "<br>“ö–∞–±–∞—Ç " + f)
: "";




// ===== –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ =====
function mark(type){

  if(!w || !f){
    showMsg("‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö<br>‚ùå –î–µ—Ä–µ–∫ –∂–æ“õ");
    return;
  }

  disableButtons();


  const url =
    API_BASE +
    "?w=" + encodeURIComponent(w) +
    "&f=" + encodeURIComponent(f) +
    "&t=" + encodeURIComponent(type) +
    "&_=" + Date.now();


  // —Ç–∏—Ö–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
  const img = new Image();
  img.src = url;


  showSuccess();
}




// ===== –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫ =====
function disableButtons(){

  inBtn.disabled = true;
  outBtn.disabled = true;

  inBtn.style.display = "none";
  outBtn.style.display = "none";
}




// ===== —Å–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—Ö–∞ =====
function showSuccess(){

  document.getElementById("msg").innerHTML =
    "‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ<br>" +
    "–ñ—ñ–±–µ—Ä—ñ–ª–¥—ñ<br><br>" +
    "–ú–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É<br>" +
    "–ë–µ—Ç—Ç—ñ –∂–∞–±—É“ì–∞ –±–æ–ª–∞–¥—ã";
}



// ===== —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ =====
function showMsg(t){

  document.getElementById("msg").innerHTML = t;

}

</script>

</body>
</html>

